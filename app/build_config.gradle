ext {
    initBuildConfigValue = {
        initBuildConfigValueFun(it)
    }
}

def initBuildConfigValueFun(defaultConfig) {
    def closure = {
        // 配置 manifest 中的占位符,这里都是
        manifestPlaceholders = [
                qqappid          : "100424468",
                BAIDU_MAP_API_KEY: "8TG5nAUHqDHHRap1CD5IPlfSsadhxjyT",
                UMENG_APP_KEY    : "62a94d2e88ccdf4b7e97e0ef",
                UMENG_SECRET_KEY : "7bc72c4cdb0f029511f4f0754ef594f1",
                NIM_APP_KEY      : "59af67265f6a48e302d1375ed497ec88",
                XUNFEI_APPID     : "232fc528",
        ]

        buildConfigField('String', 'umengAppKey', "\"${manifestPlaceholders.UMENG_APP_KEY}\"")
        buildConfigField('String', 'umengSecretKey', "\"${manifestPlaceholders.UMENG_SECRET_KEY}\"")

        buildConfigField('String', 'wxAppKey', "\"1\"")
        buildConfigField('String', 'wxSecretKey', "\"1\"")

        buildConfigField('String', 'qqAppKey', "\"1\"")
        buildConfigField('String', 'qqSecretKey', "\"1\"")

        buildConfigField('String', 'wxWorkAppKey', "\"1\"")
        buildConfigField('String', 'wxWorkSecretKey', "\"1\"")

        buildConfigField('String', 'aliPayAppKey', "\"1\"")

        buildConfigField('String', 'xunfeiAppid', "\"${manifestPlaceholders.XUNFEI_APPID}\"")


        def api = [
                // 开发
                Env_D  : 'https://dev-mzgdjg.yuanzhiyijiantong.com/',
                // 测试
                Env_T  : 'https://test-mzgdjg.yuanzhiyijiantong.com/',
                // UAT
                Env_Uat: 'https://gzzj.yuanzhiyijiantong.com:8001/',
                // 预发布
                Env_P  : 'http://10.194.68.14:8001/',
                // 正式
                Env_R  : 'http://183.6.145.40:8003/',
        ]

        // 默认环境，给非多渠道插件打包时使用, 即 build Apk  或者 build Bundle
        def Env_Default = api.Env_T

        //配置不同环境的域名
        buildConfigField 'String', 'BASE_URL_ENV_D', "\"${api.Env_D}\""
        buildConfigField 'String', 'BASE_URL_ENV_T', "\"${api.Env_T}\""
        buildConfigField 'String', 'BASE_URL_ENV_UAT', "\"${api.Env_Uat}\""
        buildConfigField 'String', 'BASE_URL_ENV_P', "\"${api.Env_P}\""
        buildConfigField 'String', 'BASE_URL_ENV_R', "\"${api.Env_R}\""
        buildConfigField 'String', 'BASE_URL_ENV_DEFAULT', "\"$Env_Default\""
    }

    closure.setDelegate(defaultConfig)
    closure.setResolveStrategy(Closure.DELEGATE_FIRST)
    closure.call()
}