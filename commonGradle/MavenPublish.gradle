//if (module_group == null || module_name == null) {
//    throw new IllegalStateException("å¿…é¡»æä¾› module_group å’Œ moduleName!")
//}

apply plugin: 'com.vanniktech.maven.publish'

apply plugin: 'signing'

signing {
    useGpgCmd() //ä½¿ç”¨ gpg-agent
    sign publishing.publications
}


mavenPublishing {

    //    configure(new com.vanniktech.maven.publish.AndroidSingleVariantLibrary("release", true, true))

    //    publishToMavenCentral(com.vanniktech.maven.publish.SonatypeHost.DEFAULT)
    //    publishToMavenCentral(com.vanniktech.maven.publish.SonatypeHost.S01)
    //    publishToMavenCentral(com.vanniktech.maven.publish.SonatypeHost.CENTRAL_PORTAL)
    publishToMavenCentral("CENTRAL_PORTAL")

    //     signAllPublications()

    //        def moduleGroup = module_group
    //        def moduleName = module_name
    //        def publishVersion = rootProject.ext.getPublicationVersion()
    //
    //
    //        println "maven ä¾èµ–åæ ‡ --------->${moduleGroup}:${moduleName}:${publishVersion}"
    //        coordinates(moduleGroup, moduleName, publishVersion)
    coordinates("moduleGroup", "moduleName", "1.0.0")
    //                coordinates(moduleGroup, moduleName, null)

    pom {
        name = moduleName
        description = "Android é¡¹ç›®åŸºç¡€æ¡†æ¶é›†æˆ"
        url = "https://github.com/Heart-Beats/BaseProject"
        licenses {
            license {
                name = "The Apache License, Version 2.0"
                url = "https://github.com/Heart-Beats/BaseProject/blob/main/LICENSE.md"
                distribution = "http://www.apache.org/licenses/LICENSE-2.0.txt"
            }
        }
        developers {
            developer {
                id = "Heart-Beats"
                name = "Heart-Beats"
                url = "https://github.com/Heart-Beats"
            }
        }
        scm {
            url = "https://github.com/Heart-Beats/BaseProject"
            connection = "scm:git:git://github.com/Heart-Beats/BaseProject.git"
            developerConnection = "scm:git:ssh://git@github.com/Heart-Beats/BaseProject.git"
        }
    }
}


//Publishing tasks
//----------------
//        generateMetadataFileForMavenPublication - Generates the Gradle metadata file for publication 'maven'.
//        generatePomFileForMavenPublication - Generates the Maven POM file for publication 'maven'.
//        publish - Publishes all publications produced by this project.
//        publishAllPublicationsToMavenCentralRepository - Publishes all Maven publications produced by this project to the mavenCentral repository.
//        publishMavenPublicationToMavenCentralRepository - Publishes Maven publication 'maven' to Maven repository 'mavenCentral'.
//        publishMavenPublicationToMavenLocal - Publishes Maven publication 'maven' to the local Maven repository.
//        publishToMavenLocal - Publishes all Maven publications produced by this project to the local Maven cache.


// åœ¨æ ¹é¡¹ç›®ä¸‹åˆ›å»ºæ‰€æœ‰çš„å‘å¸ƒä»»åŠ¡
//rootProject.tasks.register("publishAll") {
//    group = "publishing"
//    description = "å‘å¸ƒæ‰€æœ‰æ¨¡å—åˆ°Mavenä»“åº“"
//
//    // èšåˆæ‰€æœ‰å­æ¨¡å—çš„å‘å¸ƒä»»åŠ¡ï¼ˆåŒ…æ‹¬ publishToMavenLocal å’Œ publishToMavenCentralï¼‰
//    dependsOn(subprojects.collect {
//        it.tasks.matching { task ->
//            task.name.startsWith("publish")
//        }
//    }.flatten())
//
//    // å¯é€‰ï¼šæ·»åŠ åç½®æ¸…ç†ä»»åŠ¡
//    finalizedBy cleanPublicationCache
//
//    doLast {
//        logger.lifecycle("âœ… æ‰€æœ‰æ¨¡å—å‘å¸ƒå®Œæˆ")
//    }
//}
//
//// å¯é€‰ï¼šæ¸…ç†å‘å¸ƒç¼“å­˜çš„ä»»åŠ¡
//rootProject.tasks.register("cleanPublicationCache") {
//    doLast {
//        delete "${buildDir}/publications"
//        logger.lifecycle("ğŸ§¹ å·²æ¸…ç†å‘å¸ƒç¼“å­˜")
//    }
//}